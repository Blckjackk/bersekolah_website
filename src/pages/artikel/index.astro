---
import AppLayout from "../../layout/app-layout.astro";
import ArtikelGrid from "../../component/artikel/ArtikelGrid";

const API_URL = import.meta.env.PUBLIC_API_BASE_URL || 'http://localhost:8000/api';
let artikels = [];
try {
  const res = await fetch(`${API_URL}/artikels`);
  if (res.ok) {
    const data = await res.json();
    artikels = data.data || [];
  }
} catch (e) {
  artikels = [];
}
---
<AppLayout>
  <section class="container px-4 py-8 mx-auto">
    <h1 class="mb-8 text-3xl font-bold text-center text-[#406386]">Kegiatan & Artikel</h1>
    <ArtikelGrid client:load artikels={artikels} />
  </section>
</AppLayout>